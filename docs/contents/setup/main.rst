============================================================
コマンド: setup (α版)
============================================================

概要
============================================================

ある地形から指定したブロックを埋める操作手順をすべて列挙します。

そのとき、探索時に置いても置かなくても良い場所（マージンエリア）を指定することもできます。

探索結果は HTMLファイル で出力されます。

※ このコマンドはα版です。今後、仕様を変更する可能性がありますが、ご了承ください。


基本コマンド
============================================================

``java -jar sfinder.jar setup --tetfu v115@HhUpxhBeA81hCeA8yhD8AeB8JeAgH --patterns *! --fill i --margin o``


フィールドの指定方法
============================================================

テト譜から入力するとき
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. |fumen_sample_001| image:: img/fumen_sample_001.png
   :scale: 50

|fumen_sample_001|

はじめにオプションで「必ず埋める場所」「マージンエリア」の色を指定してください。

* ``-f`` or ``--fill`` → 探索時に必ず埋める必要がある場所
* ``-m`` or ``--margin`` → 探索時に置いても置かなくても良い場所（マージンエリア）

画像のフィールドを入力して、オプションに ``--fill I --margin O`` を指定すると、
水色が必ず埋めるエリアで、そこを埋めるとき一部が黄色のエリア内にはみ出ても良いことになります。

なおグレーのブロックは、固定部分となります。

.. note::

  テト譜のコメントに ``--margin o --fill i`` と書いて色を指定することもできます。


フィールドファイルから入力するとき
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

入力例 ::

  .....**__X
  ******___X
  ***XXXX_XX

通常のフィールドの定義に「必ず埋める場所」「マージンエリア」を指定します。

* ``*`` → 探索時に必ず埋める必要がある場所
* ``.`` → 探索時に置いても置かなくても良い場所（マージンエリア）

.. note::

  フィールドファイル1行目の数字は必須ではありません。
  もし数字を記載した場合は `--line`オプションとして解釈されます。


オプション一覧
============================================================

======== ====================== ======================
short    long                   default
======== ====================== ======================
``-t``   ``--tetfu``            なし
``-P``   ``--page``             1
``-p``   ``--patterns``         なし
``-m``   ``--margin``           なし
``-f``   ``--fill``             なし
``-l``   ``--line``             -1
``-d``   ``--drop``             softdrop
``-o``   ``--output-base``      output/path.txt
``-lp``  ``--log-path``         output/last_output.txt
``-fp``  ``--field-path``       input/field.txt
``-pp``  ``--patterns-path``    input/patterns.txt
======== ====================== ======================


``-t``, ``--tetfu`` [default: なし]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

フィールドやオプションなどを指定したテト譜データを指定する。

テト譜で探索条件を指定する場合は ``--tetfu v115@vhAAgH`` のように指定する。

v115のテト譜データにのみ対応。


``-P``, ``--page`` [default: 1]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

テト譜でロードするページを指定する。

ページを変更したい場合は ``--page 31`` のように指定する。


``-p``, ``--patterns`` [default: なし]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

探索ミノの組み合わせパターンを指定する。

パターンを変更したい場合は ``--pattern *p7`` のように指定する。

現在のところ、ミノの並びまでは考慮されず、あくまでミノの組み合わせ（各個数）として入力されます。


``-f``, ``--fill`` [default: なし]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

フィールドをテト譜から入力するとき、必ず埋めるエリアとするブロックの色を指定する。

このオプションで指定した色が、探索時に必ず任意のミノを置く場所と解釈なる。

色の指定値は ``--margin`` オプションの説明を参照してください。


``-m``, ``--margin`` [default: なし]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

フィールドをテト譜から入力するとき、マージンエリアとするブロックの色を指定する。

このオプションで指定した色が、探索時に置いても置かなくても良い場所と解釈される。

色の指定値は、以下のように解釈される（大文字・小文字はどちらでも良い）。

* ``I`` or ``cyan`` or ``cy`` → Iブロック
* ``J`` or ``blue`` or ``bl`` → Jブロック
* ``L`` or ``orange`` or ``or`` → Lブロック
* ``O`` or ``yellow`` or ``ye`` → Oブロック
* ``S`` or ``green`` or ``gr`` → Sブロック
* ``Z`` or ``red`` or ``re`` → Sブロック
* ``T`` or ``purple`` or ``pu`` → Tブロック
* ``none`` → 指定なし（マージンエリアなし）


``-l``, ``--line`` [default: -1]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

入力するフィールドの最大ライン数（高さ）を指定する。

指定したライン数よりも上にあるブロックは無視されます。

なお ``-1`` を指定した場合は ``最も高いフィールドの高さ`` が自動的に設定される。


``-d``, ``--drop`` [default: softdrop]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

ミノの操作に制限を加える。

以下から操作方法をひとつ選択する。

* softdrop: ソフトドロップ＋回転入れ（制限なし）
* harddrop: ハードドロップのみ


``-o``, ``--output-base`` [default: output/setup.html]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

出力結果を保存するファイルのパスを指定する。


``-lp``, ``--log-path`` [default: output/last_output.txt]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

実行時のログを保存するファイルのパスを指定する。


``-fp``, ``--field-path`` [default: input/field.txt]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

フィールドを定義するファイルのパスを指定する。


``-pp``, ``--patterns-path`` [default: input/patterns.txt]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

探索の組み合わせパターンを定義するファイルのパスを指定する。
